(this["webpackJsonpsafe-entry"]=this["webpackJsonpsafe-entry"]||[]).push([[0],{125:function(e,t,n){},143:function(e,t,n){},219:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n(27),r=n.n(i),a=(n(125),n(86)),l=n(226),o=n(117),s=n(225),u=n(224),h=n(227),j=n(228),b=n(229),d=n(230),m=n(231),p=n(77),O=n.n(p),x=(n(143),n(14));function f(e){var t=e.setLocation,n=Object(c.useState)([]),i=Object(a.a)(n,2),r=i[0],u=i[1],h=function(){var e=localStorage.getItem("particulars");null!==e&&(e=JSON.parse(e),O.a.post("/api/history",{IC:e.ic,Phone:e.phone}).then((function(e){u(e.data.map((function(e){return{location:e.Location,action:e.CheckIn?"check-in":"check-out"}})))})))};Object(c.useEffect)(h,[]);var j=r.filter((function(e){return"check-in"===e.action}));r.filter((function(e){return"check-in"!==e.action})).forEach((function(e){for(var t=function(t){if(j[t].location===e.location)return j=j.filter((function(e,n){return n!==t})),"break"},n=0;n<j.length;n++){if("break"===t(n))break}}));var m=null;j.length>0&&(m=j[j.length-1].location);return Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{children:null!==m?Object(x.jsxs)(l.a,{title:"Last check-in",style:{width:300,margin:"40px auto"},children:[Object(x.jsx)("h3",{children:m}),Object(x.jsx)(o.a,{onClick:function(){var e=localStorage.getItem("particulars");null!==e&&(e=JSON.parse(e),O.a.post("/api/checkin",{IC:e.ic,Phone:e.phone,Location:m,CheckIn:!1}).then(h))},children:"Check out"})]}):null}),Object(x.jsx)("h3",{children:"Where are you visiting?"}),Object(x.jsx)(s.b,{dataSource:["SUTD Building 1","SUTD Building 2","SUTD Building 3","SUTD Building 5","SUTD Block 55","SUTD Block 57","SUTD Block 59","SUTD Block 61"],split:!1,renderItem:function(e){return Object(x.jsx)(s.b.Item,{children:Object(x.jsx)(o.a,{style:{margin:"auto",width:300},onClick:function(){return t(e)},children:e})})}}),Object(x.jsx)(l.a,{title:"History",style:{width:300,margin:"40px auto"},children:Object(x.jsx)(s.b,{dataSource:r,renderItem:function(e){return Object(x.jsxs)(s.b.Item,{children:[Object(x.jsx)("span",{children:"check-in"===e.action?Object(x.jsx)(b.a,{style:{color:"green"}}):Object(x.jsx)(d.a,{style:{color:"red"}})}),Object(x.jsx)("span",{children:e.location})]})}})})]})}function k(e){var t=e.location,n=e.afterSubmit,c="check-in",i=localStorage.getItem("particulars"),r=null,a=null;return null!==i&&(r=(i=JSON.parse(i)).ic,a=i.phone),Object(x.jsx)("div",{children:Object(x.jsx)(l.a,{title:t,style:{width:300,margin:"40px auto"},children:Object(x.jsxs)(u.a,{name:"basic",initialValues:{remember:!0},onFinish:function(e){e.remember?localStorage.setItem("particulars",JSON.stringify(e)):localStorage.removeItem("particulars"),O.a.post("/api/checkin",{IC:e.ic,Phone:e.phone,Location:t,CheckIn:"check-in"===c}).then((function(){n()}))},children:[Object(x.jsx)(u.a.Item,{name:"ic",rules:[{required:!0,message:"Please input your NRIC/FIN"}],initialValue:r,children:Object(x.jsx)(h.a,{placeholder:"NRIC/FIN:"})}),Object(x.jsx)(u.a.Item,{name:"phone",rules:[{required:!0,message:"Please input your mobile number"}],initialValue:a,children:Object(x.jsx)(h.a,{placeholder:"Mobile Number:"})}),Object(x.jsx)(u.a.Item,{name:"remember",valuePropName:"checked",label:"Remember my particulars:",children:Object(x.jsx)(j.a,{})}),Object(x.jsx)(u.a.Item,{children:Object(x.jsx)(o.a,{type:"primary",htmlType:"submit",size:"large",shape:"round",style:{background:"#1FAF71",borderColor:"#1FAF71",width:180},onClick:function(){c="check-in"},children:"Check-In"})}),Object(x.jsx)(u.a.Item,{children:Object(x.jsx)(o.a,{htmlType:"submit",size:"large",shape:"round",style:{width:180},onClick:function(){c="check-out"},children:"Check-Out"})})]})})})}var g=function(){var e=Object(c.useState)(null),t=Object(a.a)(e,2),n=t[0],i=t[1];return Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)("div",{children:null!==n?Object(x.jsxs)(o.a,{type:"text",style:{position:"absolute",left:"50%",marginLeft:-160,top:20},onClick:function(){return i(null)},children:[Object(x.jsx)(m.a,{}),"Back"]}):null}),Object(x.jsxs)("h1",{style:{marginTop:20},children:["Safe",Object(x.jsx)("b",{children:"Entry"})]}),Object(x.jsx)("div",{children:null===n?Object(x.jsx)(f,{setLocation:i}):Object(x.jsx)(k,{location:n,afterSubmit:function(){return i(null)}})})]})};r.a.render(Object(x.jsx)(g,{}),document.getElementById("root"))}},[[219,1,2]]]);
//# sourceMappingURL=main.39fb63b4.chunk.js.map